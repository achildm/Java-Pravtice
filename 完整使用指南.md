# Java网络象棋游戏 - 完整使用指南

## 🎯 问题修复完成

### ✅ 已修复的问题
1. **头像选择功能** - 现在可以正常点击切换头像，右上角会实时显示选中的头像
2. **连接功能** - 添加了详细的错误提示和调试信息，连接问题一目了然
3. **棋子布局** - 修正了象棋的标准布局（车马象士将士象马车）

## 🚀 快速开始

### 第一步：编译项目
```bash
mvn clean compile
```

### 第二步：启动服务器
**方法1：使用批处理文件**
```bash
双击 start-server-test.bat
```

**方法2：命令行**
```bash
java -cp target/classes com.achldm.chess.ChessGameMain server
```

看到以下信息表示服务器启动成功：
```
游戏服务器启动，监听端口: 8888
```

### 第三步：启动客户端
**方法1：使用批处理文件**
```bash
双击 start-client-test.bat
```

**方法2：命令行**
```bash
java -cp target/classes com.achldm.chess.ChessGameMain
```

## 🎮 使用说明

### 登录界面操作
1. **选择头像**：
   - 点击头像网格中的任意头像
   - 右上角会立即显示选中的头像
   - 选中的头像会有凹陷边框效果

2. **输入信息**：
   - 用户名：输入任意非空用户名
   - 服务器：默认为 `localhost`，如果服务器在其他机器上请修改

3. **连接服务器**：
   - 点击"连接"按钮
   - 如果服务器未启动，会显示详细错误信息
   - 连接成功后自动进入游戏大厅

4. **其他功能**：
   - "重置"：清空输入并重置头像选择
   - "退出"：关闭程序

### 游戏大厅操作
1. **房间选择**：
   - 点击任意房间或点击"加入"按钮开始匹配
   - 需要两个玩家都进行匹配才能开始游戏

2. **聊天功能**：
   - 在底部输入框输入消息
   - 点击"发送"或按回车键发送
   - 可以与其他在线玩家聊天

3. **用户信息**：
   - 右侧显示个人头像和信息
   - 显示等级和胜率（当前为演示数据）

### 象棋游戏操作
1. **移动棋子**：
   - 点击己方棋子选中（显示红色边框）
   - 点击目标位置移动棋子
   - 点击同一棋子取消选择

2. **游戏规则**：
   - 红方先行，轮流下棋
   - 每局10分钟倒计时
   - 将死对方或超时获胜

## 🔧 调试信息

修复后的程序会在控制台输出详细的调试信息：

### 客户端调试信息
```
启动象棋游戏客户端...
选择了头像: 5
尝试连接服务器: localhost:8888
登录消息已发送
登录成功，打开大厅界面
```

### 服务器调试信息
```
游戏服务器启动，监听端口: 8888
新客户端连接: /127.0.0.1
匹配成功: 玩家1 vs 玩家2
游戏开始 - 房间: room_1703234567890
```

## 🛠 故障排除

### 1. 头像不显示或无法选择
**症状**：头像网格显示问号或点击无反应
**解决方案**：
- 检查 `src/main/resources/face/` 文件夹
- 确保有 `1-1.gif` 到 `85-1.gif` 文件
- 重新编译项目：`mvn clean compile`

### 2. 连接服务器失败
**症状**：点击连接后显示连接错误
**解决方案**：
- 确保服务器已启动并显示"监听端口: 8888"
- 检查服务器地址是否正确（默认localhost）
- 确认端口8888未被其他程序占用
- 检查防火墙设置

### 3. 服务器启动失败
**症状**：服务器启动时报端口占用错误
**解决方案**：
```bash
# Windows查看端口占用
netstat -ano | findstr :8888

# 结束占用进程（替换PID为实际进程ID）
taskkill /PID <PID> /F
```

### 4. 游戏界面异常
**症状**：棋盘不显示或棋子位置错误
**解决方案**：
- 检查 `src/main/resources/qizi/` 文件夹
- 确保有棋盘和棋子图片文件
- 重新编译项目

## 📝 测试流程

### 完整测试步骤
1. **编译项目**：`mvn clean compile`
2. **启动服务器**：运行 `start-server-test.bat`
3. **启动第一个客户端**：运行 `start-client-test.bat`
4. **测试登录**：
   - 选择不同头像，观察右上角变化
   - 输入用户名"玩家1"
   - 点击连接，应该成功进入大厅
5. **启动第二个客户端**：再次运行 `start-client-test.bat`
6. **测试匹配**：
   - 两个客户端都点击"加入"或选择房间
   - 应该自动匹配并进入游戏界面
7. **测试游戏**：
   - 红方先行，轮流移动棋子
   - 测试各种棋子的移动规则

### 预期结果
- ✅ 头像选择正常工作
- ✅ 连接功能正常，有清晰的错误提示
- ✅ 棋子布局正确（车马象士将士象马车）
- ✅ 游戏流程完整，从登录到对战

## 🎉 功能特色

### 界面特色
- 仿QQ游戏风格的登录界面
- 85个头像网格选择
- 15个房间的游戏大厅
- 实时聊天功能

### 技术特色
- 完整的网络通信协议
- 多线程服务器架构
- 完整的象棋规则实现
- 音效和计时功能

### 用户体验
- 直观的操作界面
- 详细的错误提示
- 实时的状态反馈
- 流畅的游戏体验

现在登录页面的头像选择和连接功能都已经完全修复，可以正常使用了！🎮