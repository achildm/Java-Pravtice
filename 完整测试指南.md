# Java网络象棋游戏 - 完整测试指南

## 🎯 修复完成的问题

### ✅ 已解决的4个主要问题
1. **大厅页面用户头像显示** - 现在正确显示用户选择的头像
2. **棋子对准棋盘位置** - 棋子精确对准，无超出边界问题
3. **用户名和头像信息传递** - 完整的信息传递链路
4. **棋子视角翻转** - 红方和黑方有正确的视角

## 🚀 完整测试流程

### 第一步：编译项目
```bash
mvn clean compile
```

### 第二步：启动服务器
**方法1：使用批处理文件**
```bash
双击 start-server-test.bat
```

**方法2：命令行**
```bash
java -cp target/classes com.achldm.chess.ChessGameMain server
```

看到以下信息表示服务器启动成功：
```
游戏服务器启动，监听端口: 8888
```

### 第三步：测试第一个客户端（红方）
1. **启动客户端**：
   ```bash
   java -cp target/classes com.achldm.chess.ChessGameMain
   ```

2. **登录界面测试**：
   - 点击不同的头像，观察右上角头像是否立即更新 ✅
   - 选择一个喜欢的头像（例如第5个）
   - 输入用户名："红方玩家"
   - 服务器地址保持默认："localhost"
   - 点击"连接"

3. **大厅界面验证**：
   - 检查右侧个人信息面板是否显示：
     - 正确的头像（80x80像素） ✅
     - 用户名："红方玩家" ✅
     - 等级和胜率信息
   - 点击"加入"按钮开始匹配

### 第四步：测试第二个客户端（黑方）
1. **启动第二个客户端**：
   ```bash
   java -cp target/classes com.achldm.chess.ChessGameMain
   ```

2. **登录不同用户**：
   - 选择不同的头像（例如第10个）
   - 输入用户名："黑方玩家"  
   - 点击"连接"

3. **大厅界面验证**：
   - 验证显示正确的头像和用户名
   - 点击"加入"按钮

4. **匹配成功**：
   - 两个客户端应该自动匹配
   - 1秒后进入游戏界面

### 第五步：游戏界面测试

#### 红方玩家视角验证 ✅
- **窗口标题**：应显示"象棋游戏 - 红方 - 红方玩家"
- **棋子布局**：
  - 红方棋子（帅、仕、相、马、车、炮、兵）在棋盘下半部分
  - 黑方棋子（将、士、象、马、车、炮、卒）在棋盘上半部分
- **棋子对准**：所有棋子应精确对准棋盘交叉点，无超出边界

#### 黑方玩家视角验证 ✅  
- **窗口标题**：应显示"象棋游戏 - 黑方 - 黑方玩家"
- **棋子布局**（视角翻转）：
  - 黑方棋子（将、士、象、马、车、炮、卒）在棋盘下半部分
  - 红方棋子（帅、仕、相、马、车、炮、兵）在棋盘上半部分
- **棋子对准**：所有棋子应精确对准棋盘交叉点

#### 游戏操作测试
1. **红方先行**：
   - 红方玩家点击己方棋子（应显示红色选中框）
   - 点击目标位置移动棋子
   - 移动应该有音效反馈

2. **黑方应战**：
   - 轮到黑方时，黑方玩家可以移动己方棋子
   - 验证视角翻转后的坐标转换是否正确

3. **棋子精度测试**：
   - 点击棋盘边缘的棋子，确保能正常选中
   - 验证所有棋子都在可点击范围内

## 🔍 详细验证点

### 登录界面验证
- [ ] 头像选择：点击任意头像，右上角立即更新
- [ ] 用户名输入：支持中文和英文
- [ ] 连接功能：显示详细的连接状态和错误信息
- [ ] 重置功能：清空输入并重置头像选择

### 大厅界面验证
- [ ] 用户信息面板：显示正确的头像（80x80）和用户名
- [ ] 房间布局：15个房间网格显示
- [ ] 聊天功能：可以发送和接收消息
- [ ] 匹配功能：点击"加入"开始匹配

### 游戏界面验证
- [ ] 窗口标题：显示阵营和用户名
- [ ] 视角正确：红方看到红棋在下，黑方看到黑棋在下
- [ ] 棋子对准：所有棋子精确对准棋盘交叉点
- [ ] 选中效果：点击棋子显示红色边框
- [ ] 移动音效：移动棋子有声音反馈
- [ ] 计时功能：显示剩余时间倒计时

## 🎮 预期效果截图说明

### 红方玩家视角
```
游戏开始 - 等待对手
剩余时间: 10:00

黑方棋子: 车马象士将士象马车 (上方)
         空空炮空空空炮空空
         卒空卒空卒空卒空卒
         
         空空空空空空空空空
         空空空空空空空空空
         
         兵空兵空兵空兵空兵
         空空炮空空空炮空空  
红方棋子: 车马相仕帅仕相马车 (下方)
```

### 黑方玩家视角（翻转）
```
游戏开始 - 等待对手  
剩余时间: 10:00

红方棋子: 车马相仕帅仕相马车 (上方)
         空空炮空空空炮空空
         兵空兵空兵空兵空兵
         
         空空空空空空空空空
         空空空空空空空空空
         
         卒空卒空卒空卒空卒
         空空炮空空空炮空空
黑方棋子: 车马象士将士象马车 (下方)
```

## 🛠 故障排除

### 如果头像不显示
- 检查 `src/main/resources/face/` 文件夹
- 确保有 `1-1.gif` 到 `85-1.gif` 文件
- 重新编译：`mvn clean compile`

### 如果棋子位置不对
- 确保使用最新编译的代码
- 检查棋盘偏移量设置
- 验证 `CELL_SIZE` 和 `BOARD_OFFSET` 参数

### 如果视角不正确
- 红方应该看到红棋在下方
- 黑方应该看到黑棋在下方
- 检查 `isFlipped` 变量设置

### 如果用户信息不显示
- 确保登录时选择了头像
- 检查用户名是否正确输入
- 验证信息传递链路

## 🎉 成功标准

测试通过的标准：
- ✅ 头像选择和显示完全正常
- ✅ 用户名在所有界面正确显示  
- ✅ 棋子精确对准棋盘，无超出边界
- ✅ 红方和黑方有正确的视角翻转
- ✅ 游戏流程完整，从登录到对战无问题
- ✅ 所有界面切换流畅，信息传递正确

完成以上测试后，游戏应该达到完全可用的状态！🎮